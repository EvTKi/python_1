# Генерация XML из CSV с Role-Privilige-DataGroup-ObjectReference

## Описание

Данное приложение автоматически преобразует CSV-файлы с перечнем ролей (и связанных с ними данных) в RDF/XML-файлы с заданной структурой. Весь процесс легко контролируется через удобный графический интерфейс.

Реализованы:
- Поддержка любых кодировок входных файлов (определяется автоматически)
- Проверка целостности и логирование ошибок
- Графический интерфейс на Tkinter: выбор папки, файлов и просмотр лога
- Гибкая архитектура: скрипт можно вызывать как из Python-кода, так и из командной строки

---

## Установка

1. **Python 3.6+** должен быть установлен в системе.
2. Установите необходимые библиотеки:
`pip install lxml chardet`

---

## Запуск через UI

1. Запустите файл `ui.py` (двойной клик или через командную строку):
`python ui.py`

2. В появившемся окне:
- Введите UID папки для ролей (его предоставляет ваша система, либо служба безопасности)
- Выберите папку с CSV-файлами (кнопка «Выбрать...»)
- Отметьте/снимите чекбоксы у файлов для обработки
- Нажмите «Старт» — результаты конвертации и ошибки будут видны в протоколе
- Для перехода к папке результатов используйте кнопку «Открыть папку с результатами»

---

## Запуск через командную строку

Вы можете использовать `main.py` как утилиту:

`python main.py <UID_папки> <путь_к_папке_с_csv>`
или, если параметры не указаны — они будут запрошены в интерактивном режиме.

---

## Формат данных

**Обязательные поля CSV:**
- `org_name` — наименование организации
- `dep_name` — наименование подразделения
- `dep_uid`  — уникальный идентификатор подразделения

*Заголовки должны быть именно такими в первой строке файла!*

**Пример содержания CSV:**
| org_name     | dep_name    | dep_uid   |
| ------------ | ----------- | --------- |
| ООО "Пример" | Бухгалтерия | 12345-67  |
| ООО "Пример" | ИТ-отдел    | abcde-987 |

---

## Результат

Для каждого выбранного файла `*.csv` будет создан одноимённый файл `*.xml` в той же папке. Логи процесса для каждого файла — в подкаталоге `log/`.

---

## Требования

- Python >= 3.6
- Установленные модули: `lxml`, `chardet`
- Корректно заполненные CSV-файлы (см. выше)

---

## Структура проекта

project_folder/
│
├─ main.py # обработка CSV→XML, поддержка CLI и взаимодействие с UI
├─ ui.py # графический интерфейс
│
├─ log/ # создаётся автоматически для файлов протокола
│
├─ (ваши csv-файлы) # исходные данные
├─ (xml-файлы) # результат обработки (рядышком с csv)
└─ README.md # это описание

---

## Частые вопросы

- **Кодировка CSV не utf-8?**
  - Программа определяет кодировку автоматически.
  - Если возникают проблемы — проверьте, чтобы ваши файлы имели структуру, как в примере выше.

- **Где посмотреть результат?**
  - В папке выбранной для обработки — там будут файлы `.xml` с теми же именами.

- **Что делать, если появляются ошибки в логе?**
  - Проверьте правильность и полноту заголовков и данных в csv-файле.

---

## Лицензия

MIT License (или иная по вашему выбору).

---

## Контакты и поддержка

Для консультаций, доработок, интеграции — обращайтесь к автору проекта или откройте Issue на github.
