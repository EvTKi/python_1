# Генерация XML из CSV с Role-Privilige-DataGroup-ObjectReference

## Описание

Данное приложение автоматически преобразует CSV-файлы с перечнем ролей (и связанных с ними данных) в RDF/XML-файлы с заданной структурой. Весь процесс легко контролируется через удобный графический интерфейс.

Реализованы:
- Поддержка любых кодировок входных файлов (определяется автоматически)
- Проверка целостности и логирование ошибок
- Графический интерфейс на Tkinter: выбор папки, файлов и просмотр лога
- Гибкая архитектура: скрипт можно вызывать как из Python-кода, так и из командной строки

---

## Установка

1. **Python 3.6+** должен быть установлен в системе.
2. Установите необходимые библиотеки:
`pip install lxml chardet`

---

## Формат исходного CSV
Обязательные поля и их назначение:

| Поле             | Формат данных | Описание                       | Пример                               |
| ---------------- | ------------- | ------------------------------ | ------------------------------------ |
| dep_uid          | GUID          | UID подразделения (objectUid)  | fc7f76ef-e381-4659-82f6-2e7a5ba097b8 |
| dep_name         | Str           | Наименование подразделения     | Бухгалтерия                          |
| dep_headdep_uid  | GUID          | UID вышестоящего подразделения | ... (может быть пустым)              |
| dep_headdep_name | Str           | Имя вышестоящего департамента  | ... (может быть пустым)              |
| org_uid          | GUID          | UID организации                | gc7f76ef-e381-4659-82f6-2e7a5ba097b8 |
| org_name         | Str           | Наименование организации       | Организация_1                        |
---

## Запуск через UI

1. Запустите файл `ui.py` (двойной клик или через командную строку):
`python ui.py`

2. В появившемся окне:
- Введите UID папки для ролей (его предоставляет ваша система, либо служба безопасности)
- Выберите папку с CSV-файлами (кнопка «Выбрать...»)
- Отметьте/снимите чекбоксы у файлов для обработки
- Нажмите «Старт» — результаты конвертации и ошибки будут видны в протоколе
- Для перехода к папке результатов используйте кнопку «Открыть папку с результатами»

---

## Запуск через командную строку

Вы можете использовать `main.py` как утилиту:

`python main.py <UID_папки> <путь_к_папке_с_csv>`
или, если параметры не указаны — они будут запрошены в интерактивном режиме.

---

## Структура выходных файлов
Для каждого `.csv` (кроме `Sample.csv`) — свой XML (например: `dep_org.csv` → `dep_org.xml`)
Каждый входной файл сопровождается своим логом (например: `dep_org.csv` → `log/dep_org.log`)
Все логи — в папке `log/`, создаётся автоматически

---

## Требования

- Python >= 3.6
- Установленные модули: `lxml`, `chardet`
- Корректно заполненные CSV-файлы (см. выше)

---

## Структура проекта

project_folder/
│
├─ main.py # обработка CSV→XML, поддержка CLI и взаимодействие с UI
├─ ui.py # графический интерфейс
│
├─ log/ # создаётся автоматически для файлов протокола
│
├─ (ваши csv-файлы) # исходные данные
├─ (xml-файлы) # результат обработки (рядышком с csv)
└─ README.md # это описание

---

## Частые вопросы

- **Кодировка CSV не utf-8?**
  - Программа определяет кодировку автоматически.
  - Если возникают проблемы — проверьте, чтобы ваши файлы имели структуру, как в примере выше.

- **Где посмотреть результат?**
  - В папке выбранной для обработки — там будут файлы `.xml` с теми же именами.

- **Что делать, если появляются ошибки в логе?**
  - Проверьте правильность и полноту заголовков и данных в csv-файле.

---

## Контакты и поддержка

Для консультаций, доработок, интеграции — обращайтесь к автору проекта или откройте Issue на github.
